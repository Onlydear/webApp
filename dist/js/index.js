angular.module("app",["ui.router"]).controller("AppController",["$scope","$window",function(t,e){t.appTitle="webApp";var o="首页";t.type="home",t.$on("tabChange",function(e,l){switch(t.type=l.type,t.type){case"home":o="首页";break;case"author":o="作者";break;case"content":o="栏目";break;case"my":o="我的"}t.$broadcast("titleChange",{title:o})}),t.back=function(){e.history.back()}}]),angular.module("app").config(["$sceDelegateProvider",function(t){t.resourceUrlWhitelist(["self","http://localhost/api/**"])}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("app",{url:"/app",views:{home:{templateUrl:"../views/home_tpl.html",controller:"HomeController"},author:{templateUrl:"../views/author_tpl.html",controller:"authorController"},content:{template:"<h1>栏目</h1>",controller:"authorController"},my:{template:"<h1>我的</h1>",controller:"authorController"}}}),e.otherwise("app/index")}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("app.index",{url:"/index",template:"<list></list>"})}]),angular.module("app").config(["$stateProvider",function(t){t.state("app.detail",{url:"/detail/:id",controller:"DetailController",template:'<detail content="{{content}}"></detail>'})}]),angular.module("app").controller("authorController",["$scope",function(t){}]),angular.module("app").controller("DetailController",["$scope","$stateParams",function(t,e){t.item=t.listData[e.id],console.log(t.item),t.content=t.item.content}]),angular.module("app").controller("HomeController",["$scope","zkHttp","$state",function(t,e,o){o.go("app.index"),e.getData(function(e){console.log(e),t.listData=e},function(t){console.log(t)})}]),angular.module("app").directive("detail",function(){return{restrict:"EA",template:'<div class="list_detail"></div>',link:function(t,e,o){e.html(o.content)}}}),angular.module("app").directive("list",function(){return{restrict:"EA",templateUrl:"../views/list_tpl.html"}}),angular.module("app").directive("navs",function(){return{restrict:"EA",templateUrl:"../views/nav_tpl.html",link:function(t,e,o){t.$on("titleChange",function(t,o){var l=o.title;e.find("span").html(l)}),console.log(o),"true"!=o.isBack&&e.find("em").css({display:"none"})}}}),angular.module("app").directive("tabbar",function(){return{restrict:"EA",templateUrl:"../views/tabbar_tpl.html",link:function(t,e,o){t.tabChange=function(e){t.$emit("tabChange",{type:e})}}}}),angular.module("app").service("zkHttp",["$http",function(t){this.getData=function(e,o){t({url:"http://localhost/api/home.php",method:"jsonp"}).then(function(t){e(t.data.posts)}).catch(function(t){o(t)})}}]);